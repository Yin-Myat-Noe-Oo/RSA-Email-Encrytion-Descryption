<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SecureMail - RSA Encrypted Email</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif;
    }
    
body {
  background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('image(1).jpg');
  min-height: 100vh;
  padding: 15px;
  display: flex;
  flex-direction: column;
  align-items: center;
  color: #e6f1ff;
  overflow: hidden;

  background-repeat: no-repeat;      
  background-size: cover;             
  background-position: center center; 
}

    
    .header {
      text-align: center;
      margin-bottom: 20px;
      width: 100%;
      max-width: 800px;
      flex-shrink: 0; /* Prevent header from shrinking */
    }
    
    .header h1 {
      font-weight: 800;
      font-size: 2.2rem;
      background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 8px;
      letter-spacing: -0.5px;
      text-transform: uppercase;
    }
    
    .header h2 {
      font-weight: 500;
      font-size: 1.1rem;
      color: #a8d2ff;
      margin-bottom: 15px;
      letter-spacing: 0.5px;
    }
    
    .header p {
      max-width: 500px;
      margin: 0 auto;
      color: #89b4f8;
      line-height: 1.4;
      font-weight: 300;
      font-size: 0.9rem;
    }
    
   .email-app {
    width: 100%;
    max-width: 800px;
    max-height: calc(100vh - 150px);
    background: #0a1929;
    border-radius: 16px;
    box-shadow: 
        0 12px 40px rgba(0, 80, 180, 0.45),
        0 4px 15px rgba(46, 105, 206, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    overflow: auto;
    border: 1px solid #4a90e2;
    flex-shrink: 0;
    position: relative;
}

.email-app::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, 
        rgba(51, 123, 206, 0) 0%, 
        rgba(74, 144, 226, 0.8) 50%, 
        rgba(79, 152, 236, 0) 100%);
    z-index: 10;
}
    
    .app-header {
      background: linear-gradient(90deg, #cddff1 0%, #e0e8f1 100%);
      color: #1e3a5f;
      padding: 15px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid #1e3a5f;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    
    .app-header h3 {
      font-weight: 600;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .app-header h3 i {
      color: #4facfe;
    }
    
    .mode-toggle {
      display: flex;
      background: #132a43;
      border-radius: 8px;
      overflow: hidden;
      border: 1px solid #1e3a5f;
    }
    
    .mode-btn {
      padding: 8px 15px;
      background: none;
      border: none;
      color: #89b4f8;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s;
      font-size: 0.9rem;
    }
    
    .mode-btn.active {
      background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
      color: white;
    }
    
    .mode-btn:hover:not(.active) {
      background: #1e3a5f;
      color: #e6f1ff;
    }
    
    .app-content {
      padding: 20px;
    }
    
    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 15px;
    }
    
    .form-section {
      background: #16314f;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #1e3a5f;
    }
    
    .form-section h4 {
      font-size: 1rem;
      margin-bottom: 15px;
      color: #e6f1ff;
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
    }
    
    .form-section h4 i {
      color: #00f2fe;
    }
    
    .form-group {
      margin-bottom: 12px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 6px;
      font-weight: 500;
      color: #a8d2ff;
      font-size: 0.85rem;
    }
    
    input, select, textarea {
      width: 100%;
      padding: 10px 12px;
      background: #e0edfb;
      border: 1px solid #1e3a5f;
      border-radius: 6px;
      font-size: 14px;
      transition: all 0.3s;
      color: #1e3a5f;
      font-family: 'Inter', sans-serif;
    }
    
    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #4facfe;
      box-shadow: 0 0 0 2px rgba(79, 172, 254, 0.2);
    }
    
    .crypto-params {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 10px;
      margin: 15px 0;
    }
    
    .key-display {
      background: linear-gradient(135deg, #0b2137 0%, #0a1a2b 100%);
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      border: 1px solid #1e3a5f;
    }
    
    .key-display h4 {
      margin-bottom: 12px;
      color: #4facfe;
      font-size: 1rem;
    }
    
    .key-grid {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 10px;
    }
    
    .key-item h5 {
      font-size: 12px;
      color: #a8d2ff;
      margin-bottom: 6px;
      font-weight: 500;
    }
    
    .key-value {
      font-family: 'JetBrains Mono', monospace;
      background: #0a1929;
      padding: 8px 10px;
      border-radius: 6px;
      border: 1px solid #1e3a5f;
      min-height: 38px;
      font-weight: 500;
      color: #00f2fe;
      font-size: 0.85rem;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .output-section {
      margin-top: 15px;
    }
    
    .action-bar {
      display: flex;
      justify-content: center;
      margin-top: 20px;
      position: sticky;
      bottom: 0;
      background: #e2ebf5;
      padding: 10px 0;
      margin: 20px -20px -20px;
      border-top: 1px solid #1e3a5f;
    }
    
    .process-btn {
      background: linear-gradient(90deg, #1d496f 0%, #0d3645 100%);
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s;
      box-shadow: 0 4px 15px rgba(79, 172, 254, 0.35);
      letter-spacing: 0.5px;
    }
    
    .process-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(79, 172, 254, 0.5);
    }
    
    textarea {
      min-height: 80px;
      resize: vertical;
    }
    
    .output-field {
      background: #e0edfb;
      font-family: 'JetBrains Mono', monospace;
      color: #1e3a5f;
      font-weight: bold;
    }
    
    @media (max-width: 768px) {
      .form-grid {
        grid-template-columns: 1fr;
      }
      
      .crypto-params, .key-grid {
        grid-template-columns: 1fr;
      }
      
      .header h1 {
        font-size: 1.8rem;
      }
      
      .app-header {
        flex-direction: column;
        gap: 10px;
        align-items: flex-start;
      }
      
      .mode-toggle {
        align-self: stretch;
      }
      
      .email-app {
        max-height: calc(100vh - 130px);
      }
    }
    
    .info-text {
      color: #89b4f8;
      font-size: 0.8rem;
      margin-top: 4px;
    }
    
    /* New York Skyline Decoration */
    .ny-skyline {
      width: 100%;
      height: 20px;
      background: linear-gradient(90deg, #4facfe, #00f2fe, #4facfe);
      mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 120'%3E%3Cpath fill='%23000' d='M0,0V120H1200V0ZM739,69H677V41h62V69Zm-143,0H534V41h62V69ZM924,69H862V41h62V69ZM328,69H266V41h62V69Zm-143,0H123V41h62V69ZM107,69H45V41H107V69Zm943,0H988V41h62V69ZM600,69H538V41h62V69Z'/%3E%3C/svg%3E");
      -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 120'%3E%3Cpath fill='%23000' d='M0,0V120H1200V0ZM739,69H677V41h62V69Zm-143,0H534V41h62V69ZM924,69H862V41h62V69ZM328,69H266V41h62V69Zm-143,0H123V41h62V69ZM107,69H45V41H107V69Zm943,0H988V41h62V69ZM600,69H538V41h62V69Z'/%3E%3C/svg%3E");
      mask-size: cover;
      -webkit-mask-size: cover;
      margin: 15px 0;
      opacity: 0.8;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Email encryption mechanism </h1>
    <div class="ny-skyline"></div>
  </div>
  
  <div class="email-app">
    <div class="app-header">
      <h3><i class="fas fa-lock"></i> SECURE MESSAGE COMPOSER</h3>
      <div class="mode-toggle">
        <button class="mode-btn active" id="encryptBtn" onclick="setMode('encrypt')"><i class="fas fa-lock"></i> ENCRYPT</button>
        <button class="mode-btn" id="decryptBtn" onclick="setMode('decrypt')"><i class="fas fa-unlock"></i> DECRYPT</button>
      </div>
    </div>
    
    <div class="app-content">
      <div class="form-grid">
        <div class="form-section">
          <h4><i class="fas fa-user"></i> IDENTITY</h4>
          
          <div class="form-group">
            <label for="sender">YOUR NAME</label>
            <input type="text" id="sender" placeholder="Enter your name" value="Alice">
          </div>
          
          <div class="form-group">
            <label for="recipient">RECIPIENT NAME</label>
            <input type="text" id="recipient" placeholder="Enter recipient name" value="Bob">
          </div>
          
          <div class="form-group">
            <label for="subject">SUBJECT</label>
            <input type="text" id="subject" placeholder="Message subject" value="Secure Message">
          </div>
        </div>
        
        <div class="form-section">
          <h4><i class="fas fa-key"></i> CRYPTOGRAPHIC PARAMETERS</h4>
          
          <div class="crypto-params">
            <div class="form-group">
              <label for="p">PRIME P</label>
              <input type="number" id="p" value="53">
            </div>
            
            <div class="form-group">
              <label for="q">PRIME Q</label>
              <input type="number" id="q" value="59">
            </div>
            
            <div class="form-group">
              <label for="e">EXPONENT E</label>
              <input type="number" id="e" value="3">
              <p class="info-text">Must be coprime with φ(n)</p>
            </div>
          </div>
          
          <div class="key-display">
            <h4><i class="fas fa-fingerprint"></i> GENERATED KEYS</h4>
            
            <div class="key-grid">
              <div class="key-item">
                <h5>PUBLIC KEY (N)</h5>
                <div id="publickeyN" class="key-value">-</div>
              </div>
              
              <div class="key-item">
                <h5>EXPONENT (E)</h5>
                <div id="exponentE" class="key-value">-</div>
              </div>
              
              <div class="key-item">
                <h5>PRIVATE KEY(D)</h5>
                <div id="privatekeyD" class="key-value">-</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="form-section">
        <h4><i class="fas fa-envelope"></i> MESSAGE</h4>
        
        <div class="form-group">
          <label id="msgLabel" for="msg">MESSAGE TO ENCRYPT</label>
          <textarea id="msg" placeholder="Type your message here..."></textarea>
        </div>
      </div>
      
      <div class="form-grid output-section">
        <div class="form-group">
          <label for="output">NUMERIC OUTPUT</label>
          <textarea id="output" class="output-field" readonly></textarea>
        </div>
        
        <div class="form-group">
          <label for="textOutput">TEXT OUTPUT</label>
          <textarea id="textOutput" class="output-field" readonly></textarea>
        </div>
      </div>
      
      <div class="action-bar">
        <button type="button" class="process-btn" onclick="RSA()">
          <i class="fas fa-paper-plane"></i> PROCESS MESSAGE
        </button>
      </div>
    </div>
  </div>

  <script>
    function gcd(a,b){return(!b)?a:gcd(b,a%b);}
    function modInverse(e,phi){let[a1,a2,a3]=[1,0,phi];let[b1,b2,b3]=[0,1,e];while(b3!=0){let q=Math.floor(a3/b3);[a1,a2,a3,b1,b2,b3]=[b1,b2,b3,a1-q*b1,a2-q*b2,a3-q*b3];}if(a3!=1)return null;return(a2%phi+phi)%phi;}
    function modPow(base,exp,mod){let result=1;base=base%mod;while(exp>0){if(exp%2===1)result=(result*base)%mod;exp=Math.floor(exp/2);base=(base*base)%mod;}return result;}
    function textToDigits(text){text=text.toUpperCase().replace(/[^A-Z]/g,"");let digits="";for(let i=0;i<text.length;i++){digits+=String(text.charCodeAt(i)-65).padStart(2,"0");}return digits;}
    function digitsToText(digits){let text="";for(let i=0;i<digits.length;i+=2){let num=parseInt(digits.substr(i,2));if(!isNaN(num))text+=String.fromCharCode(num+65);}return text;}
    function splitToBlocks(digits){if(digits.length%4!==0)digits=digits.padEnd(digits.length+(4-digits.length%4),"0");let blocks=[];for(let i=0;i<digits.length;i+=4)blocks.push(parseInt(digits.substr(i,4)));return blocks;}
    function blocksToDigits(blocks){return blocks.map(b=>b.toString().padStart(4,"0")).join("");}
    
    function setMode(mode) {
      document.getElementById('mode').value = mode;
      document.getElementById('encryptBtn').classList.toggle('active', mode === 'encrypt');
      document.getElementById('decryptBtn').classList.toggle('active', mode === 'decrypt');
      
      if (mode === "encrypt") {
        document.getElementById("msgLabel").innerHTML = "MESSAGE TO ENCRYPT";
        document.getElementById("msg").placeholder = "Type your message here...";
      } else {
        document.getElementById("msgLabel").innerHTML = "ENCRYPTED NUMBERS";
        document.getElementById("msg").placeholder = "Paste encrypted numbers here (space separated)...";
      }
    }
    
    function RSA(){
      let p=parseInt(document.getElementById('p').value);
      let q=parseInt(document.getElementById('q').value);
      let e=parseInt(document.getElementById('e').value);
      let mode=document.getElementById('mode').value;
      let msg=document.getElementById('msg').value.trim();
      let n=p*q; 
      let phi=(p-1)*(q-1);
      
      if(gcd(e,phi)!==1){
        alert("Invalid e! Choose e coprime with φ(n).");
        return;
      }
      
      let d=modInverse(e,phi);
      let numericOutput=""; 
      let textOutput="";
      
      if(mode==="encrypt"){
        let digits=textToDigits(msg);
        let blocks=splitToBlocks(digits);
        let encrypted=blocks.map(m=>modPow(m,e,n));
        numericOutput=encrypted.join(" ");
        textOutput=digitsToText(blocksToDigits(encrypted));
      } else {
        let nums=msg.split(/\s+/).map(Number);
        let decryptedBlocks=nums.map(c=>modPow(c,d,n));
        numericOutput=decryptedBlocks.join(" ");
        textOutput=digitsToText(blocksToDigits(decryptedBlocks));
      }
      
      document.getElementById('publickeyN').innerHTML=n;
      document.getElementById('exponentE').innerHTML=e;
      document.getElementById('privatekeyD').innerHTML=d;
      document.getElementById('output').value=numericOutput;
      document.getElementById('textOutput').value=textOutput;
    }
    
    // Initialize the form
    window.onload = function() {
      // Create a hidden mode field
      let modeField = document.createElement('input');
      modeField.type = 'hidden';
      modeField.id = 'mode';
      modeField.value = 'encrypt';
      document.querySelector('.app-content').appendChild(modeField);
      
      setMode('encrypt');
    };
  </script>
</body>
</html>